{% extends 'base.html' %}

{% block title %}–õ–æ–≥–∏ —Å–ø—Ä–æ–± –≤—Ö–æ–¥—É{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-12">
        <div class="card">
            <div class="card-body p-4">
                <h2 class="mb-4">üìú –õ–æ–≥–∏ —Å–ø—Ä–æ–± –≤—Ö–æ–¥—É</h2>

                <div class="table-responsive">
                    <table class="table table-striped table-hover table-sm align-middle">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>–ß–∞—Å</th>
                            <th>Username –≤–≤–µ–¥–µ–Ω–∏–π</th>
                            <th>User ID</th>
                            <th>IP –∞–¥—Ä–µ—Å–∞</th>
                            <th>Success</th>
                            <th>–ü—Ä–∏—á–∏–Ω–∞</th>
                            <th>User-Agent</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for a in attempts %}
                        <tr>
                            <td>{{ a.id }}</td>
                            <td>{{ a.created_at.strftime('%d.%m.%Y %H:%M:%S') }}</td>
                            <td>{{ a.username_entered }}</td>
                            <td>{{ a.user_id or '-' }}</td>
                            <td>{{ a.ip_address or '-' }}</td>
                            <td>
                                {% if a.success %}
                                <span class="badge bg-success">—É—Å–ø—ñ—Ö</span>
                                {% else %}
                                <span class="badge bg-danger">–Ω–µ–≤–¥–∞—á–∞</span>
                                {% endif %}
                            </td>
                            <td>{{ a.reason }}</td>
                            <td style="max-width: 250px; word-break: break-all;">
                                {{ a.user_agent }}
                            </td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="8" class="text-center text-muted">
                                –©–µ –Ω–µ–º–∞—î –∂–æ–¥–Ω–æ—ó —Å–ø—Ä–æ–±–∏ –≤—Ö–æ–¥—É.
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>

                <a href="{{ url_for(DASHBOARD_URL) }}" class="btn btn-outline-secondary mt-3">
                    ‚Üê –ù–∞–∑–∞–¥ –¥–æ –ø–∞–Ω–µ–ª—ñ
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
